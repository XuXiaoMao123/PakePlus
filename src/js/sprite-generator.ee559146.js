"use strict";(self["webpackChunktool_vue2"]=self["webpackChunktool_vue2"]||[]).push([[744],{9486:(t,e,a)=>{a.d(e,{A:()=>c});var r=function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"},[e("div",{staticClass:"bg-white dark:bg-neutral-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col"},[e("div",{staticClass:"flex justify-between items-center p-4 border-b border-neutral-200 dark:border-neutral-700"},[e("h2",{staticClass:"text-xl font-bold text-primary dark:text-primary-400"},[t._v(" "+t._s(t.title)+" ")]),e("button",{staticClass:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",on:{click:t.close}},[e("i",{staticClass:"fa fa-times text-xl"})])]),e("div",{staticClass:"p-6 overflow-y-auto flex-grow"},[t._t("default")],2),e("div",{staticClass:"p-4 border-t border-neutral-200 dark:border-neutral-700 flex justify-end"},[e("button",{staticClass:"px-4 py-2 rounded bg-primary text-white font-semibold hover:bg-primary/80 transition",on:{click:t.close}},[t._v(" 关闭 ")])])])]):t._e()},s=[];const i={name:"HelpDialog",props:{show:{type:Boolean,default:!1},title:{type:String,default:"使用说明"}},methods:{close:function(){this.$emit("close")}}},n=i;var l=a(81656),o=(0,l.A)(n,r,s,!1,null,null,null);const c=o.exports},24331:(t,e,a)=>{a.r(e),a.d(e,{default:()=>J});var r=function(){var t=this,e=t._self._c;return e("main",{staticClass:"flex-grow container mx-auto px-4 py-8 bg-primary-50 dark:bg-neutral-900 rounded-2xl"},[t._m(0),e("div",{staticClass:"grid grid-cols-1 lg:grid-cols-12 gap-8"},[e("div",{staticClass:"lg:col-span-4 space-y-6"},[e("FileUpload",{attrs:{files:t.files,customNames:t.customNames},on:{"files-change":t.onFilesChange,"custom-names-change":t.onCustomNamesChange,"remove-file":t.onRemoveFile}}),e("SpriteSettings",{model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}})],1),e("div",{staticClass:"lg:col-span-8 space-y-6"},[e("SpritePreview",{ref:"preview",attrs:{files:t.files,customNames:t.customNames,settings:t.settings},on:{"sprite-generated":t.onSpriteGenerated,"show-help":function(e){t.showHelp=!0}}}),e("CssCode",{attrs:{css:t.css,format:t.settings.cssFormat},on:{download:t.downloadCss,copy:t.copyCss}})],1)]),t.toast.show?e("Toast",{attrs:{msg:t.toast.msg,type:t.toast.type}}):t._e(),t.showHelp?e("HelpDialog",{on:{close:function(e){t.showHelp=!1}}}):t._e()],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-8 flex items-center"},[e("i",{staticClass:"fa fa-th-large text-3xl md:text-4xl text-primary dark:text-primary-400 mr-3"}),e("div",[e("h1",{staticClass:"text-2xl md:text-3xl font-bold text-primary dark:text-primary-400 mb-1"},[t._v("雪碧图生成器")]),e("p",{staticClass:"text-neutral-600 dark:text-neutral-300 text-base"},[t._v("本地合成多图为雪碧图，自动生成 "),e("span",{staticClass:"text-primary font-semibold"},[t._v("CSS/LESS/SCSS")]),t._v(" 代码，支持多种排列方式和尺寸调整。")])])])}],i=(a(54554),a(26099),a(47764),a(62953),a(76031),a(3296),a(27208),a(48408),a(14603),a(47566),a(98721),a(62010),function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-neutral-800 rounded-xl shadow-custom p-6"},[t._m(0),e("div",{class:["border-2 border-dashed border-neutral-200 dark:border-primary-800 rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-all-300",{"file-drop-active":t.fileDropActive}],on:{dragover:function(e){e.preventDefault(),t.fileDropActive=!0},dragleave:function(e){e.preventDefault(),t.fileDropActive=!1},drop:function(e){return e.preventDefault(),t.onDrop.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-cloud-upload text-4xl text-neutral-400 mb-3"}),e("p",{staticClass:"text-neutral-600 dark:text-neutral-200 mb-2"},[t._v("拖放图标文件到这里，或")]),t._m(1),e("input",{ref:"fileInput",staticClass:"hidden",attrs:{id:"fileInput",type:"file",accept:"image/*",multiple:""},on:{change:t.onFileChange}}),e("p",{staticClass:"text-xs text-neutral-500 dark:text-neutral-400 mt-3"},[t._v("支持 PNG, JPG, SVG 格式")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.files.length,expression:"files.length"}],staticClass:"mt-4"},[t._m(2),e("div",{staticClass:"space-y-2 max-h-60 overflow-y-auto pr-1"},t._l(t.files,function(a,r){return e("div",{key:a.name,staticClass:"flex flex-col p-2 border border-neutral-200 dark:border-primary-800 rounded-lg bg-neutral-50 dark:bg-neutral-900 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all-300"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center"},[e("i",{staticClass:"fa fa-file-image-o text-primary mr-2"}),e("span",{staticClass:"text-sm font-medium text-neutral-800 dark:text-neutral-100"},[t._v(t._s(a.name))]),e("span",{staticClass:"text-xs text-neutral-500 dark:text-neutral-400 ml-2"},[t._v(t._s(t.formatFileSize(a.size)))])]),e("button",{staticClass:"text-neutral-400 hover:text-red-500 transition-all-300",on:{click:function(e){return t.$emit("remove-file",r)}}},[e("i",{staticClass:"fa fa-times"})])]),e("div",{staticClass:"mt-2 flex items-center"},[e("span",{staticClass:"text-xs text-neutral-500 dark:text-neutral-400 mr-2"},[t._v("CSS类名:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomNames[a.name],expression:"localCustomNames[file.name]"}],staticClass:"text-xs px-2 py-1 border border-neutral-200 dark:border-primary-800 rounded flex-grow focus:outline-none focus:ring-1 focus:ring-primary bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100",attrs:{type:"text",placeholder:t.defaultClassName(a.name)},domProps:{value:t.localCustomNames[a.name]},on:{input:[function(e){e.target.composing||t.$set(t.localCustomNames,a.name,e.target.value)},t.emitCustomNames]}})])])}),0)])])}),n=[function(){var t=this,e=t._self._c;return e("h2",{staticClass:"text-lg font-semibold mb-4 flex items-center text-primary dark:text-primary-400"},[e("i",{staticClass:"fa fa-upload mr-2"}),t._v("上传图标 ")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"btn-primary px-4 py-2 rounded-lg inline-block cursor-pointer",attrs:{for:"fileInput"}},[e("i",{staticClass:"fa fa-plus mr-1"}),t._v("选择文件 ")])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"text-md font-medium mb-2 flex items-center text-secondary dark:text-secondary-400"},[e("i",{staticClass:"fa fa-files-o mr-2"}),t._v("已上传文件 ")])}],l=a(59258),o=a(41034);a(28706),a(2008),a(51629),a(23418),a(44114),a(15086),a(59089),a(18111),a(22489),a(7588),a(13579),a(9868),a(78459),a(27495),a(71761),a(25440),a(11392),a(23500);const c={props:{files:{type:Array,default:function(){return[]}},customNames:{type:Object,default:function(){return{}}}},data:function(){return{fileDropActive:!1,localCustomNames:{}}},watch:{customNames:{handler:function(t){this.localCustomNames=(0,o.A)({},t)},immediate:!0}},methods:{onFileChange:function(t){this.handleFiles(t.target.files),this.$refs.fileInput.value=""},onDrop:function(t){this.fileDropActive=!1,this.handleFiles(t.dataTransfer.files)},handleFiles:function(t){var e=Array.from(t).filter(function(t){return t.type.startsWith("image/")});if(e.length){var a=(0,l.A)(this.files),r=(0,o.A)({},this.localCustomNames);e.forEach(function(t){if(a.some(function(e){return e.name===t.name})){var e="".concat(t.name.replace(/\.[^/.]+$/,""),"_").concat(Date.now()).concat(t.name.match(/\.[^/.]+$/)[0]),r=new File([t],e,{type:t.type});a.push(r)}else a.push(t)}),this.$emit("files-change",a),this.$emit("custom-names-change",r)}},emitCustomNames:function(){this.$emit("custom-names-change",(0,o.A)({},this.localCustomNames))},defaultClassName:function(t){return t.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"-").replace(/^-+|-+$/g,"")||"icon"},formatFileSize:function(t){if(0===t)return"0 Bytes";var e=1024,a=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+a[r]}}},u=c;var d=a(81656),m=(0,d.A)(u,i,n,!1,null,null,null);const p=m.exports;a(64346),a(62062),a(34782),a(61701);var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-6 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 rounded-xl"},[t._m(0),e("div",{staticClass:"space-y-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-200 mb-1"},[t._v("排列方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.local.layoutType,expression:"local.layoutType"}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.local,"layoutType",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"horizontal"}},[t._v("水平排列")]),e("option",{attrs:{value:"vertical"}},[t._v("垂直排列")]),e("option",{attrs:{value:"binary-tree"}},[t._v("最优排列")])])]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-200 mb-1"},[t._v("图标间距 (px)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.spacing,expression:"local.spacing",modifiers:{number:!0}}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",attrs:{type:"number",min:"0",max:"50"},domProps:{value:t.local.spacing},on:{input:function(e){e.target.composing||t.$set(t.local,"spacing",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-200 mb-1"},[t._v("图标大小调整")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.local.resizeMode,expression:"local.resizeMode"}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.local,"resizeMode",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"none"}},[t._v("保持原始大小")]),e("option",{attrs:{value:"fixed"}},[t._v("固定大小")]),e("option",{attrs:{value:"max"}},[t._v("限制最大尺寸")]),e("option",{attrs:{value:"percentage"}},[t._v("按比例缩放")])]),"fixed"===t.local.resizeMode?e("div",{staticClass:"mt-2 flex space-x-2"},[e("div",{staticClass:"flex-1"},[e("label",{staticClass:"block text-xs text-neutral-600 dark:text-neutral-400 mb-1"},[t._v("宽度 (px)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.fixedWidth,expression:"local.fixedWidth",modifiers:{number:!0}}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",attrs:{type:"number",min:"1",max:"1000"},domProps:{value:t.local.fixedWidth},on:{input:function(e){e.target.composing||t.$set(t.local,"fixedWidth",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"flex-1"},[e("label",{staticClass:"block text-xs text-neutral-600 dark:text-neutral-400 mb-1"},[t._v("高度 (px)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.fixedHeight,expression:"local.fixedHeight",modifiers:{number:!0}}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",attrs:{type:"number",min:"1",max:"1000"},domProps:{value:t.local.fixedHeight},on:{input:function(e){e.target.composing||t.$set(t.local,"fixedHeight",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]):t._e(),"max"===t.local.resizeMode?e("div",{staticClass:"mt-2 flex space-x-2"},[e("div",{staticClass:"flex-1"},[e("label",{staticClass:"block text-xs text-neutral-600 dark:text-neutral-400 mb-1"},[t._v("最大宽度 (px)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.maxWidth,expression:"local.maxWidth",modifiers:{number:!0}}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",attrs:{type:"number",min:"1",max:"1000"},domProps:{value:t.local.maxWidth},on:{input:function(e){e.target.composing||t.$set(t.local,"maxWidth",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"flex-1"},[e("label",{staticClass:"block text-xs text-neutral-600 dark:text-neutral-400 mb-1"},[t._v("最大高度 (px)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.maxHeight,expression:"local.maxHeight",modifiers:{number:!0}}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",attrs:{type:"number",min:"1",max:"1000"},domProps:{value:t.local.maxHeight},on:{input:function(e){e.target.composing||t.$set(t.local,"maxHeight",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]):t._e(),"percentage"===t.local.resizeMode?e("div",{staticClass:"mt-2"},[e("label",{staticClass:"block text-xs text-neutral-600 dark:text-neutral-400 mb-1"},[t._v("缩放比例 (%)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.scalePercentage,expression:"local.scalePercentage",modifiers:{number:!0}}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",attrs:{type:"number",min:"1",max:"200"},domProps:{value:t.local.scalePercentage},on:{input:function(e){e.target.composing||t.$set(t.local,"scalePercentage",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):t._e()]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-200 mb-1"},[t._v("输出格式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.local.outputFormat,expression:"local.outputFormat"}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.local,"outputFormat",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"png"}},[t._v("PNG")]),e("option",{attrs:{value:"jpg"}},[t._v("JPG")])])]),"jpg"===t.local.outputFormat?e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-200 mb-1"},[t._v("图片质量 (仅JPG)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.local.quality,expression:"local.quality",modifiers:{number:!0}}],staticClass:"w-full",attrs:{type:"range",min:"0.1",max:"1",step:"0.1"},domProps:{value:t.local.quality},on:{__r:function(e){t.$set(t.local,"quality",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("div",{staticClass:"flex justify-between text-xs text-neutral-500 dark:text-neutral-400 mt-1"},[e("span",[t._v("低")]),e("span",[t._v(t._s(t.local.quality))]),e("span",[t._v("高")])])]):t._e(),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-200 mb-1"},[t._v("CSS格式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.local.cssFormat,expression:"local.cssFormat"}],staticClass:"w-full px-3 py-2 border border-primary-100 dark:border-primary-800 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.local,"cssFormat",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"css"}},[t._v("CSS")]),e("option",{attrs:{value:"less"}},[t._v("Less")]),e("option",{attrs:{value:"scss"}},[t._v("SCSS")])])]),e("div",{staticClass:"flex items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.local.enableDebug,expression:"local.enableDebug"}],staticClass:"h-4 w-4 text-primary focus:ring-primary border-primary-100 dark:border-primary-800 rounded",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.local.enableDebug)?t._i(t.local.enableDebug,null)>-1:t.local.enableDebug},on:{change:function(e){var a=t.local.enableDebug,r=e.target,s=!!r.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);r.checked?n<0&&t.$set(t.local,"enableDebug",a.concat([i])):n>-1&&t.$set(t.local,"enableDebug",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.local,"enableDebug",s)}}}),e("label",{staticClass:"ml-2 block text-sm text-neutral-700 dark:text-neutral-200"},[t._v("启用调试模式")])])])])},h=[function(){var t=this,e=t._self._c;return e("h2",{staticClass:"text-lg font-semibold mb-4 flex items-center text-primary dark:text-primary-400"},[e("i",{staticClass:"fa fa-sliders mr-2"}),t._v("雪碧图设置 ")])}];const x={props:{value:{type:Object,required:!0}},computed:{local:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},g=x;var b=(0,d.A)(g,f,h,!1,null,null,null);const v=b.exports;var y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card shadow-custom p-6 md:p-6 bg-white dark:bg-neutral-800 rounded-xl"},[e("div",{staticClass:"flex justify-between items-center mb-6"},[e("div",{staticClass:"flex items-center space-x-3"},[e("button",{staticClass:"flex items-center text-neutral-400 hover:text-primary transition-all-300 font-medium",attrs:{title:"帮助"},on:{click:function(e){return t.$emit("show-help")}}},[e("i",{staticClass:"fa fa-question-circle text-xl"}),e("span",{staticClass:"hidden md:inline ml-1"},[t._v("帮助")])]),e("span",{staticClass:"border-l border-primary-100 dark:border-primary-800 h-6 mx-3"}),t._m(0)]),e("div",{staticClass:"flex space-x-2"},[e("button",{staticClass:"p-2 rounded-lg border border-primary-100 dark:border-primary-800 hover:bg-primary/10 transition-all-300",on:{click:t.zoomIn}},[e("i",{staticClass:"fa fa-search-plus text-primary"})]),e("button",{staticClass:"p-2 rounded-lg border border-primary-100 dark:border-primary-800 hover:bg-primary/10 transition-all-300",on:{click:t.zoomOut}},[e("i",{staticClass:"fa fa-search-minus text-primary"})]),e("button",{staticClass:"p-2 rounded-lg border border-primary-100 dark:border-primary-800 hover:bg-primary/10 transition-all-300",on:{click:t.resetZoom}},[e("i",{staticClass:"fa fa-expand text-primary"})])])]),e("div",{staticClass:"sprite-preview-container rounded-xl overflow-auto flex items-center justify-center bg-bg-light dark:bg-neutral-900",staticStyle:{"min-height":"220px"}},[e("div",{staticClass:"relative transition-all duration-300",style:{transform:"scale(".concat(t.currentScale,")")}},[t.hasSprite?[t.isDark?e("div",{staticClass:"absolute inset-0 bg-white/80 rounded-lg pointer-events-none z-10"}):t._e(),e("div",{class:{"relative z-20":t.isDark},domProps:{innerHTML:t._s(t.previewHtml)}})]:[t._m(1)]],2)]),e("div",{staticClass:"mt-6 grid grid-cols-2 gap-4"},[e("button",{staticClass:"btn-primary py-3 rounded-lg flex items-center justify-center disabled:btn-disabled",attrs:{disabled:t.files.length<2},on:{click:t.generateSprite}},[e("i",{staticClass:"fa fa-magic mr-2"}),t._v("生成雪碧图 ")]),e("button",{staticClass:"btn-secondary py-3 rounded-lg flex items-center justify-center disabled:btn-disabled",attrs:{disabled:!t.spriteBlob},on:{click:t.downloadSprite}},[e("i",{staticClass:"fa fa-download mr-2"}),t._v("下载图片 ")])])])},w=[function(){var t=this,e=t._self._c;return e("h2",{staticClass:"text-xl font-bold flex items-center text-primary"},[e("i",{staticClass:"fa fa-eye mr-2"}),t._v("雪碧图预览 ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col items-center justify-center w-full h-full py-10"},[e("i",{staticClass:"fa fa-picture-o text-5xl mb-4 text-primary dark:text-primary-400"}),e("p",{staticClass:"text-lg text-primary/80 dark:text-primary-300/80 font-medium"},[t._v("请上传图标，生成的雪碧图将在此预览")])])}],C=a(90208),k=a(25026),_=a(69492),S=a(20908),A=a(3604),N=a(30388);a(48598),a(26910);const $={props:{files:{type:Array,default:function(){return[]}},customNames:{type:Object,default:function(){return{}}},settings:{type:Object,required:!0}},data:function(){return{currentScale:1,previewHtml:'<div class="text-center text-neutral-400">\n        <i class="fa fa-picture-o text-5xl mb-3"></i>\n        <p>上传图标后生成的雪碧图将显示在这里</p>\n      </div>',spriteBlob:null,css:"",debugInfo:[]}},computed:{isDark:function(){return document.documentElement.classList.contains("dark")},hasSprite:function(){return null!==this.spriteBlob}},methods:{zoomIn:function(){this.currentScale<2&&(this.currentScale+=.2)},zoomOut:function(){this.currentScale>.5&&(this.currentScale-=.2)},resetZoom:function(){this.currentScale=1},generateSprite:function(){var t=this;return(0,N.A)((0,S.A)().m(function e(){var a,r,s,i,n,l,c,u,d,m,p,f,h,x,g,b,v,y,w,N,$,M,D,F,P,j,H,z,U,T,B,W,E,I,q,L,R,O,G,Z,J,K,V;return(0,S.A)().w(function(e){while(1)switch(e.n){case 0:if(!(t.files.length<2)){e.n=1;break}return e.a(2);case 1:return t.previewHtml='<div class="text-center text-neutral-400 py-10">\n        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-3"></div>\n        <p>正在生成雪碧图...</p>\n      </div>',t.spriteBlob=null,t.css="",t.debugInfo=[],e.n=2,Promise.all(t.files.map(function(t){return new Promise(function(e,a){var r=new window.Image;r.onload=function(){return e({img:r,file:t})},r.onerror=a,r.src=URL.createObjectURL(t)})}));case 2:if(a=e.v,r=[],s=t.settings.resizeMode,"none"===s){e.n=10;break}i=document.createElement("canvas"),n=i.getContext("2d"),l=(0,A.A)(a),e.p=3,u=(0,S.A)().m(function e(){var a,l,o,u,d,m,p,f;return(0,S.A)().w(function(e){while(1)switch(e.n){case 0:return a=c.value,l=a.img.width,o=a.img.height,"fixed"===s?(l=t.settings.fixedWidth,o=t.settings.fixedHeight):"max"===s?(u=t.settings.maxWidth,d=t.settings.maxHeight,(l>u||o>d)&&(m=Math.min(u/l,d/o),l=Math.floor(l*m),o=Math.floor(o*m))):"percentage"===s&&(p=t.settings.scalePercentage,l=Math.floor(l*p/100),o=Math.floor(o*p/100)),i.width=l,i.height=o,n.clearRect(0,0,l,o),n.drawImage(a.img,0,0,l,o),f=new window.Image,f.src=i.toDataURL(),e.n=1,new Promise(function(t){f.onload=t});case 1:r.push({img:f,file:a.file,width:l,height:o});case 2:return e.a(2)}},e)}),l.s();case 4:if((c=l.n()).done){e.n=6;break}return e.d((0,C.A)(u()),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,V=e.v,l.e(V);case 8:return e.p=8,l.f(),e.f(8);case 9:e.n=11;break;case 10:r=a.map(function(t){return{img:t.img,file:t.file,width:t.img.width,height:t.img.height}});case 11:if(d=t.settings.spacing,m=0,p=0,f=[],"horizontal"!==t.settings.layoutType){e.n=12;break}m=d*(r.length-1),p=0,r.forEach(function(t){m+=t.width,p=Math.max(p,t.height)}),h=0,f=r.map(function(t){var e=(0,o.A)({x:h,y:0},t);return h+=t.width+d,e}),e.n=21;break;case 12:if("vertical"!==t.settings.layoutType){e.n=13;break}m=0,p=d*(r.length-1),r.forEach(function(t){p+=t.height,m=Math.max(m,t.width)}),x=0,f=r.map(function(t){var e=(0,o.A)({x:0,y:x},t);return x+=t.height+d,e}),e.n=21;break;case 13:g=function(){function t(e,a,r,s){(0,k.A)(this,t),this.x=e,this.y=a,this.w=r,this.h=s,this.used=!1,this.right=null,this.down=null}return(0,_.A)(t,[{key:"fit",value:function(e,a){return this.used?this.right&&this.right.fit(e,a)||this.down&&this.down.fit(e,a):e<=this.w&&a<=this.h?(this.used=!0,this.right=new t(this.x+e+d,this.y,this.w-e-d,a),this.down=new t(this.x,this.y+a+d,this.w,this.h-a-d),this):null}}])}(),r.sort(function(t,e){return e.width*e.height-t.width*t.height}),b=0,v=0,y=0,r.forEach(function(t){b+=(t.width+d)*(t.height+d),v=Math.max(v,t.width),y=Math.max(y,t.height)}),w=null,N=0,$=[1.1,1.2,1.3,1.4,1.5];case 14:if(!(N<$.length)){e.n=20;break}M=$[N],D=Math.max(v,Math.ceil(Math.sqrt(b)*M)),F=Math.max(y,Math.ceil(Math.sqrt(b)*M)),P=new g(0,0,D,F),j=!0,H=[],z=0,U=0,T=0;case 15:if(!(T<r.length)){e.n=18;break}if(B=r[T],W=P.fit(B.width,B.height),!W){e.n=16;break}H.push((0,o.A)({x:W.x,y:W.y},B)),z=Math.max(z,W.x+B.width),U=Math.max(U,W.y+B.height),e.n=17;break;case 16:return j=!1,e.a(3,18);case 17:T++,e.n=15;break;case 18:if(!j){e.n=19;break}if(E=b/(z*U),(!w||E>w.eff)&&(w={pos:H,width:z,height:U,eff:E}),!(E>.8)){e.n=19;break}return e.a(3,20);case 19:N++,e.n=14;break;case 20:w?(m=w.width,p=w.height,f=w.pos):(I=Math.ceil(Math.sqrt(r.length)),q=Math.ceil(r.length/I),L=0,R=0,r.forEach(function(t){L=Math.max(L,t.width),R=Math.max(R,t.height)}),m=I*L+(I-1)*d,p=q*R+(q-1)*d,f=r.map(function(t,e){var a=Math.floor(e/I),r=e%I;return(0,o.A)({x:r*(L+d),y:a*(R+d)},t)}));case 21:O=document.createElement("canvas"),O.width=m,O.height=p,G=O.getContext("2d"),G.clearRect(0,0,m,p),f.forEach(function(t){G.drawImage(t.img,t.x,t.y,t.width,t.height)}),Z=".sprite {\n  background-image: url('sprite.png');\n  background-repeat: no-repeat;\n  display: inline-block;\n}\n\n",f.forEach(function(e,a){var r=t.customNames[e.file.name]||e.file.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"-").replace(/^-+|-+$/g,"");r&&"-"!==r&&""!==r||(r="icon-".concat(a+1)),Z+=".sprite-".concat(r," {\n"),Z+="  width: ".concat(e.width,"px;\n"),Z+="  height: ".concat(e.height,"px;\n"),Z+="  background-position: -".concat(e.x,"px -").concat(e.y,"px;\n"),Z+="}\n\n"}),t.css=Z,t.$emit("sprite-generated",{css:Z}),J=t.settings.outputFormat,K=t.settings.quality,O.toBlob(function(e){t.spriteBlob=e;var a=URL.createObjectURL(e),r='\n          <img src="'.concat(a,'" alt="Sprite Preview" class="max-w-full border border-primary-100 dark:border-primary-800 rounded-lg shadow-sm">\n          <div class="absolute top-2 right-2 bg-white/80 px-2 py-1 rounded text-xs font-medium text-neutral-700">\n            ').concat(O.width," × ").concat(O.height," px\n          </div>\n        ");t.settings.enableDebug&&t.debugInfo.length>0&&(r+='\n            <div class="mt-4 p-3 bg-neutral-100 rounded-lg text-xs text-neutral-700 max-h-40 overflow-y-auto">\n              <h4 class="font-medium mb-1">调试信息:</h4>\n              <ul class="list-disc list-inside">\n                '.concat(t.debugInfo.map(function(t){return"<li>".concat(t,"</li>")}).join(""),"\n              </ul>\n            </div>\n          ")),t.previewHtml=r},"png"===J?"image/png":"image/jpeg",K);case 22:return e.a(2)}},e,null,[[3,7,8,9]])}))()},downloadSprite:function(){if(this.spriteBlob){var t=document.createElement("a");t.href=URL.createObjectURL(this.spriteBlob),t.download="sprite."+this.settings.outputFormat,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}},M=$;var D=(0,d.A)(M,y,w,!1,null,null,null);const F=D.exports;var P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card shadow-custom p-6 md:p-6 bg-white dark:bg-neutral-800 rounded-xl"},[e("div",{staticClass:"flex justify-between items-center mb-6"},[t._m(0),e("button",{staticClass:"text-sm px-4 py-2 bg-neutral-100 text-primary rounded-lg hover:bg-primary/10 transition-all-300 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.css},on:{click:function(e){return t.$emit("copy")}}},[e("i",{staticClass:"fa fa-copy mr-1"}),t._v("复制代码 ")])]),e("div",{staticClass:"overflow-hidden"},[e("div",{staticClass:"p-4 bg-neutral-800 dark:bg-neutral-900 text-neutral-100 font-mono text-base h-60 overflow-auto rounded-xl"},[e("pre",{staticClass:"whitespace-pre-wrap"},[t._v(t._s(t.displayCSS))])])]),e("div",{staticClass:"mt-6"},[e("button",{staticClass:"w-full bg-neutral-700 text-white py-3 rounded-lg flex items-center justify-center hover:bg-neutral-800 transition-all-300 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.css},on:{click:function(e){return t.$emit("download")}}},[e("i",{staticClass:"fa fa-download mr-2"}),t._v("下载CSS文件 ")])])])},j=[function(){var t=this,e=t._self._c;return e("h2",{staticClass:"text-xl font-bold flex items-center text-primary"},[e("i",{staticClass:"fa fa-code mr-2"}),t._v("CSS代码 ")])}];a(13609),a(42762);const H={props:{css:{type:String,default:""},format:{type:String,default:"css"}},computed:{displayCSS:function(){if(!this.css)return"/* 生成的CSS代码将显示在这里 */";if("css"===this.format)return this.css;var t=this.css.split("\n"),e=[];return t.forEach(function(t){t.trim().startsWith(".sprite-")?e.push(t.trim()):t.trim().startsWith("}")?e.push(t):t.trim()?e.push("  "+t):e.push(t)}),"less"===this.format?(e.unshift(".sprite() {"),e.push("}")):(e.unshift(".sprite {"),e.push("}")),e.join("\n")}}},z=H;var U=(0,d.A)(z,P,j,!1,null,null,null);const T=U.exports;var B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fixed bottom-8 right-8 px-6 py-4 rounded-xl shadow-lg z-50 flex items-center",class:"success"===t.type?"toast-success":"toast-error"},[e("i",{class:"success"===t.type?"fa fa-check-circle mr-3":"fa fa-exclamation-circle mr-3"}),e("span",{staticClass:"text-base font-medium"},[t._v(t._s(t.msg))])])},W=[];const E={props:{msg:String,type:{type:String,default:"success"}}},I=E;var q=(0,d.A)(I,B,W,!1,null,null,null);const L=q.exports;var R=a(9486);const O={components:{FileUpload:p,SpriteSettings:v,SpritePreview:F,CssCode:T,Toast:L,HelpDialog:R.A},data:function(){return{files:[],customNames:{},settings:{layoutType:"binary-tree",spacing:5,resizeMode:"none",fixedWidth:32,fixedHeight:32,maxWidth:64,maxHeight:64,scalePercentage:100,outputFormat:"png",quality:.9,cssFormat:"css",enableDebug:!1},css:"",toast:{show:!1,msg:"",type:"success"},showHelp:!1}},methods:{onFilesChange:function(t){this.files=t},onCustomNamesChange:function(t){this.customNames=t},onRemoveFile:function(t){this.files.splice(t,1)},onSpriteGenerated:function(t){var e=t.css;this.css=e},downloadCss:function(){if(this.css){var t=new Blob([this.css],{type:"text/css"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="sprite.".concat(this.settings.cssFormat),document.body.appendChild(e),e.click(),document.body.removeChild(e),this.showToast("CSS文件下载成功","success")}},copyCss:function(){var t=this;this.css&&navigator.clipboard.writeText(this.css).then(function(){t.showToast("CSS代码已复制到剪贴板","success")})["catch"](function(){t.showToast("复制失败，请手动复制","error")})},showToast:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.toast={show:!0,msg:t,type:a},setTimeout(function(){e.toast.show=!1},3e3)}}},G=O;var Z=(0,d.A)(G,r,s,!1,null,null,null);const J=Z.exports}}]);