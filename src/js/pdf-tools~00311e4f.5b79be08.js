"use strict";(self["webpackChunktool_vue2"]=self["webpackChunktool_vue2"]||[]).push([[677],{17331:(t,e,a)=>{a.d(e,{A:()=>tt});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"space-y-6"},[e("pdf-file-upload",{on:{"files-selected":t.onFilesSelected}}),t.files.length?e("pdf-file-list",{attrs:{files:t.files,"is-processing":t.isProcessing},on:{"update:files":function(e){t.files=e},"clear-all":t.clearFiles,"download-file":t.downloadFile}}):t._e(),t.files.length?e("div",{staticClass:"border rounded-lg bg-neutral-50 dark:bg-neutral-900 border-neutral-200 dark:border-neutral-600"},[e("pdf-watermark-settings",{attrs:{value:t.watermarkSettings},on:{input:function(e){return t.watermarkSettings=e},"image-selected":t.onImageSelect}})],1):t._e(),t.files.length?e("pdf-action-buttons",{attrs:{"is-processing":t.isProcessing,"selected-count":t.selectedCount,"success-count":t.successCount},on:{process:t.processSelectedFiles,"download-all":t.downloadAllFiles,"select-all":t.selectAllFiles,"deselect-all":t.deselectAllFiles,"clear-all":t.clearFiles}}):t._e(),t.isProcessing?e("pdf-progress-display",{attrs:{"processed-count":t.processedCount,"total-to-process":t.totalToProcess}}):t._e(),e("pdf-error-display",{attrs:{"batch-errors":t.batchErrors,"success-count":t.successCount,"is-processing":t.isProcessing}})],1)},s=[],n=a(3604),l=a(20908),i=a(30388),o=a(59258),u=(a(16280),a(76918),a(2008),a(51629),a(62062),a(44114),a(34782),a(59089),a(1688),a(23288),a(62010),a(18111),a(22489),a(7588),a(61701),a(26099),a(47764),a(23500),a(62953),a(76031),a(3296),a(27208),a(48408),a(14603),a(47566),a(98721),function(){var t=this,e=t._self._c;return e("div",{staticClass:"border-2 border-dashed border-neutral-300 dark:border-neutral-600 rounded-lg p-8 text-center transition-colors cursor-pointer",class:{"border-red-400 dark:border-red-400 bg-red-50 dark:bg-red-900/10 shadow-lg":t.dragover},on:{click:t.triggerFileInput,dragover:function(e){return e.preventDefault(),t.onDragOver.apply(null,arguments)},dragleave:function(e){return e.preventDefault(),t.onDragLeave.apply(null,arguments)},drop:function(e){return e.preventDefault(),t.onFileDrop.apply(null,arguments)}}},[e("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:"application/pdf",multiple:""},on:{change:t.onFileChange}}),e("i",{staticClass:"fa fa-cloud-upload-alt text-4xl text-neutral-400 dark:text-neutral-500 mb-3"}),e("p",{staticClass:"text-neutral-600 dark:text-neutral-300"},[t._v("点击或拖拽上传PDF文件")]),e("p",{staticClass:"text-neutral-500 dark:text-neutral-400 text-sm mt-1"},[t._v("支持多文件批量处理")])])}),c=[];a(23418);const d={name:"PdfFileUpload",data:function(){return{dragover:!1}},methods:{triggerFileInput:function(){this.$refs.fileInput.click()},onDragOver:function(){this.dragover=!0},onDragLeave:function(){this.dragover=!1},onFileChange:function(t){var e=Array.from(t.target.files||[]);this.$emit("files-selected",e)},onFileDrop:function(t){if(this.dragover=!1,t.dataTransfer.files&&t.dataTransfer.files.length){var e=Array.from(t.dataTransfer.files).filter(function(t){return"application/pdf"===t.type});this.$emit("files-selected",e)}}}},p=d;var f=a(81656),g=(0,f.A)(p,u,c,!1,null,null,null);const m=g.exports;a(28706),a(64346);var b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"border border-neutral-200 dark:border-neutral-600 rounded-lg p-4"},[e("div",{staticClass:"flex items-center justify-between mb-3"},[e("h4",{staticClass:"text-lg font-semibold text-neutral-900 dark:text-white"},[t._v("待处理文件 (共"+t._s(t.files.length)+"个)")]),e("button",{staticClass:"text-xs text-neutral-500 hover:text-red-500",on:{click:function(e){return t.$emit("clear-all")}}},[t._v("清空全部")])]),e("draggable",{staticClass:"space-y-2",attrs:{handle:".drag-handle",animation:200,clone:function(t){return t},move:function(){return!0}},on:{input:t.updateFiles},model:{value:t.localFiles,callback:function(e){t.localFiles=e},expression:"localFiles"}},t._l(t.localFiles,function(a,r){return e("div",{key:a._key,staticClass:"flex items-center justify-between p-3 bg-neutral-50 dark:bg-neutral-800 rounded group hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors"},[e("div",{staticClass:"flex items-center gap-3 min-w-0 flex-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.selected,expression:"f.selected"}],staticClass:"w-4 h-4 text-red-500 rounded focus:ring-red-500",attrs:{type:"checkbox",disabled:t.isProcessing},domProps:{checked:Array.isArray(a.selected)?t._i(a.selected,null)>-1:a.selected},on:{change:[function(e){var r=a.selected,s=e.target,n=!!s.checked;if(Array.isArray(r)){var l=null,i=t._i(r,l);s.checked?i<0&&t.$set(a,"selected",r.concat([l])):i>-1&&t.$set(a,"selected",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(a,"selected",n)},t.updateFiles]}}),e("i",{staticClass:"fa fa-bars drag-handle text-neutral-400 dark:text-neutral-500 cursor-move"}),e("div",{staticClass:"min-w-0 flex-1"},[e("div",{staticClass:"flex items-center gap-2"},[e("span",{staticClass:"truncate text-neutral-800 dark:text-neutral-200 font-medium",attrs:{title:a.name}},[t._v(t._s(a.name))]),e("span",{staticClass:"text-xs text-neutral-500 dark:text-neutral-400"},[t._v("("+t._s(t.formatFileSize(a.size))+")")])]),a.status?e("div",{staticClass:"flex items-center gap-2 mt-1"},["processing"===a.status?e("span",{staticClass:"text-xs text-blue-500 flex items-center gap-1"},[e("i",{staticClass:"fa fa-spinner fa-spin"}),t._v(" 处理中... ")]):"success"===a.status?e("span",{staticClass:"text-xs text-green-500 flex items-center gap-1"},[e("i",{staticClass:"fa fa-check"}),t._v(" 处理完成 ")]):"error"===a.status?e("span",{staticClass:"text-xs text-red-500 flex items-center gap-1"},[e("i",{staticClass:"fa fa-times"}),t._v(" 处理失败 ")]):t._e()]):t._e()])]),e("div",{staticClass:"flex items-center gap-2"},[a.result?e("button",{staticClass:"text-green-500 hover:text-green-700 p-1",attrs:{title:"下载"},on:{click:function(e){return e.stopPropagation(),t.$emit("download-file",a)}}},[e("i",{staticClass:"fa fa-download"})]):t._e(),e("button",{staticClass:"text-red-500 hover:text-red-700 p-1",attrs:{title:"移除"},on:{click:function(e){return e.stopPropagation(),t.removeFile(r)}}},[e("i",{staticClass:"fa fa-times"})])])])}),0),e("div",{staticClass:"mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-600"},[e("div",{staticClass:"flex items-center justify-between text-sm text-neutral-600 dark:text-neutral-400"},[e("span",[t._v("已选择: "+t._s(t.selectedCount)+"/"+t._s(t.files.length)+" 个文件")]),e("div",{staticClass:"flex gap-2"},[t.successCount>0?e("span",{staticClass:"text-green-500"},[t._v("成功: "+t._s(t.successCount))]):t._e(),t.errorCount>0?e("span",{staticClass:"text-red-500"},[t._v("失败: "+t._s(t.errorCount))]):t._e()])])])],1)},x=[],v=(a(54554),a(9868),a(61527)),h=a.n(v);const k={name:"PdfFileList",components:{draggable:h()},props:{files:{type:Array,default:function(){return[]}},isProcessing:{type:Boolean,default:!1}},data:function(){return{localFiles:[]}},computed:{selectedCount:function(){return this.localFiles.filter(function(t){return t.selected}).length},successCount:function(){return this.localFiles.filter(function(t){return"success"===t.status}).length},errorCount:function(){return this.localFiles.filter(function(t){return"error"===t.status}).length}},watch:{files:{handler:function(t){this.localFiles=(0,o.A)(t)},immediate:!0,deep:!0}},methods:{formatFileSize:function(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB"},removeFile:function(t){this.localFiles.splice(t,1),this.updateFiles()},updateFiles:function(){this.$emit("update:files",this.localFiles)}}},C=k;var _=(0,f.A)(C,b,x,!1,null,null,null);const y=_.exports;a(78459),a(58940);var w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"watermark-settings bg-neutral-50 dark:bg-neutral-900 rounded-lg p-4"},[e("h4",{staticClass:"text-lg font-semibold mb-4 text-neutral-900 dark:text-white"},[t._v("水印设置")]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水印类型 ")]),e("div",{staticClass:"flex gap-4"},[e("label",{staticClass:"flex items-center"},[e("input",{staticClass:"mr-2 text-red-500",attrs:{type:"radio"},domProps:{value:"text",checked:"text"===t.localSettings.type},on:{change:function(e){return t.updateSetting("type","text")}}}),e("span",{staticClass:"text-neutral-700 dark:text-neutral-300"},[t._v("文字水印")])]),e("label",{staticClass:"flex items-center"},[e("input",{staticClass:"mr-2 text-red-500",attrs:{type:"radio"},domProps:{value:"image",checked:"image"===t.localSettings.type},on:{change:function(e){return t.updateSetting("type","image")}}}),e("span",{staticClass:"text-neutral-700 dark:text-neutral-300"},[t._v("图片水印")])])])]),"text"===t.localSettings.type?e("div",{staticClass:"space-y-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水印文字 ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"text",placeholder:"输入水印文字"},domProps:{value:t.localSettings.text},on:{input:function(e){return t.updateSetting("text",e.target.value)}}})]),e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 字体大小 ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"8",max:"72"},domProps:{value:t.localSettings.fontSize},on:{input:function(e){t.updateSetting("fontSize",parseInt(e.target.value))}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 透明度 ")]),e("input",{staticClass:"w-full",attrs:{type:"range",min:"0.1",max:"1",step:"0.1"},domProps:{value:t.localSettings.opacity},on:{input:function(e){t.updateSetting("opacity",parseFloat(e.target.value))}}}),e("span",{staticClass:"text-sm text-neutral-500 dark:text-neutral-400"},[t._v(t._s(t.localSettings.opacity))])])]),e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 颜色 ")]),e("input",{staticClass:"w-full h-10 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800",attrs:{type:"color"},domProps:{value:t.localSettings.color},on:{input:function(e){return t.updateSetting("color",e.target.value)}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 旋转角度 ")]),e("input",{staticClass:"w-full",attrs:{type:"range",min:"-180",max:"180",step:"15"},domProps:{value:t.localSettings.rotation},on:{input:function(e){t.updateSetting("rotation",parseInt(e.target.value))}}}),e("span",{staticClass:"text-sm text-neutral-500 dark:text-neutral-400"},[t._v(t._s(t.localSettings.rotation)+"°")])])])]):t._e(),"image"===t.localSettings.type?e("div",{staticClass:"space-y-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水印图片 ")]),e("div",{staticClass:"border-2 border-dashed border-neutral-300 dark:border-neutral-700 rounded-lg p-4 text-center hover:border-red-400 dark:hover:border-red-400 transition-colors cursor-pointer",on:{click:t.triggerImageInput}},[e("input",{ref:"imageInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.onImageSelect}}),t.localSettings.imageFile?e("div",{staticClass:"text-green-600 dark:text-green-400"},[e("i",{staticClass:"fa fa-check-circle text-2xl mb-2"}),e("p",[t._v(t._s(t.localSettings.imageFile.name))]),e("p",{staticClass:"text-sm"},[t._v(t._s(t.formatFileSize(t.localSettings.imageFile.size)))])]):e("div",{staticClass:"text-neutral-500 dark:text-neutral-400"},[e("i",{staticClass:"fa fa-image text-2xl mb-2"}),e("p",[t._v("点击选择图片")]),e("p",{staticClass:"text-sm"},[t._v("支持 JPG、PNG、GIF 格式")])])])]),e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 宽度 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"10",max:"500"},domProps:{value:t.localSettings.imageWidth},on:{input:function(e){t.updateSetting("imageWidth",parseInt(e.target.value))}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 透明度 ")]),e("input",{staticClass:"w-full",attrs:{type:"range",min:"0.1",max:"1",step:"0.1"},domProps:{value:t.localSettings.opacity},on:{input:function(e){t.updateSetting("opacity",parseFloat(e.target.value))}}}),e("span",{staticClass:"text-sm text-neutral-500 dark:text-neutral-400"},[t._v(t._s(t.localSettings.opacity))])])])]):t._e(),e("div",{staticClass:"border-t border-neutral-200 dark:border-neutral-700 pt-4 mt-4"},[e("h5",{staticClass:"text-md font-medium mb-3 text-neutral-900 dark:text-white"},[t._v("水印密度")]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水印密度 ")]),e("div",{staticClass:"flex gap-4"},[e("label",{staticClass:"flex items-center"},[e("input",{staticClass:"mr-2 text-red-500",attrs:{type:"radio"},domProps:{value:"single",checked:"single"===t.localSettings.density},on:{change:function(e){return t.updateSetting("density","single")}}}),e("span",{staticClass:"text-neutral-700 dark:text-neutral-300"},[t._v("单个水印")])]),e("label",{staticClass:"flex items-center"},[e("input",{staticClass:"mr-2 text-red-500",attrs:{type:"radio"},domProps:{value:"grid",checked:"grid"===t.localSettings.density},on:{change:function(e){return t.updateSetting("density","grid")}}}),e("span",{staticClass:"text-neutral-700 dark:text-neutral-300"},[t._v("网格水印")])]),e("label",{staticClass:"flex items-center"},[e("input",{staticClass:"mr-2 text-red-500",attrs:{type:"radio"},domProps:{value:"diagonal",checked:"diagonal"===t.localSettings.density},on:{change:function(e){return t.updateSetting("density","diagonal")}}}),e("span",{staticClass:"text-neutral-700 dark:text-neutral-300"},[t._v("对角水印")])])])]),"grid"===t.localSettings.density?e("div",{staticClass:"mb-4"},[e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水平间距 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"50",max:"500"},domProps:{value:t.localSettings.gridSpacingX||200},on:{input:function(e){t.updateSetting("gridSpacingX",parseInt(e.target.value))}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 垂直间距 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"50",max:"500"},domProps:{value:t.localSettings.gridSpacingY||200},on:{input:function(e){t.updateSetting("gridSpacingY",parseInt(e.target.value))}}})])])]):t._e(),"diagonal"===t.localSettings.density?e("div",{staticClass:"mb-4"},[e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 间距 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"50",max:"300"},domProps:{value:t.localSettings.diagonalSpacing||150},on:{input:function(e){t.updateSetting("diagonalSpacing",parseInt(e.target.value))}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 偏移量 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"-100",max:"100"},domProps:{value:t.localSettings.diagonalOffset||0},on:{input:function(e){t.updateSetting("diagonalOffset",parseInt(e.target.value))}}})])])]):t._e(),e("h5",{staticClass:"text-md font-medium mb-3 text-neutral-900 dark:text-white"},[t._v("位置设置")]),e("div",{staticClass:"grid grid-cols-2 gap-4 mb-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水平位置 ")]),e("select",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",domProps:{value:t.localSettings.horizontalPosition},on:{change:function(e){return t.updateSetting("horizontalPosition",e.target.value)}}},[e("option",{attrs:{value:"left"}},[t._v("左侧")]),e("option",{attrs:{value:"center"}},[t._v("居中")]),e("option",{attrs:{value:"right"}},[t._v("右侧")])])]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 垂直位置 ")]),e("select",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",domProps:{value:t.localSettings.verticalPosition},on:{change:function(e){return t.updateSetting("verticalPosition",e.target.value)}}},[e("option",{attrs:{value:"top"}},[t._v("顶部")]),e("option",{attrs:{value:"center"}},[t._v("居中")]),e("option",{attrs:{value:"bottom"}},[t._v("底部")])])])]),e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 水平偏移 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"-200",max:"200"},domProps:{value:t.localSettings.horizontalOffset},on:{input:function(e){t.updateSetting("horizontalOffset",parseInt(e.target.value))}}})]),e("div",[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 垂直偏移 (像素) ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"number",min:"-200",max:"200"},domProps:{value:t.localSettings.verticalOffset},on:{input:function(e){t.updateSetting("verticalOffset",parseInt(e.target.value))}}})])]),e("div",{staticClass:"mt-4"},[e("label",{staticClass:"flex items-center"},[e("input",{staticClass:"mr-2 text-red-500",attrs:{type:"checkbox"},domProps:{value:t.localSettings.applyToAllPages},on:{change:function(e){return t.updateSetting("applyToAllPages",e.target.checked)}}}),e("span",{staticClass:"text-sm text-neutral-700 dark:text-neutral-300"},[t._v("应用到所有页面")])])]),t.localSettings.applyToAllPages?t._e():e("div",{staticClass:"mt-4"},[e("label",{staticClass:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2"},[t._v(" 应用页面范围 ")]),e("input",{staticClass:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",attrs:{type:"text",placeholder:"例如: 1,3-5,7"},domProps:{value:t.localSettings.pageRange},on:{input:function(e){return t.updateSetting("pageRange",e.target.value)}}}),e("p",{staticClass:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},[t._v(" 留空表示应用到所有页面，支持单个页码(1)和范围(1-5) ")])])])])},S=[],P=a(23772),F=a(41034);a(11392);const A={name:"PdfWatermarkSettings",props:{value:{type:Object,required:!0}},computed:{localSettings:function(){return this.value}},methods:{updateSetting:function(t,e){var a=(0,F.A)((0,F.A)({},this.localSettings),{},(0,P.A)({},t,e));this.$emit("input",a)},triggerImageInput:function(){this.$refs.imageInput.click()},onImageSelect:function(t){if(t.target.files&&0!==t.target.files.length){var e=t.target.files[0];e&&e.type.startsWith("image/")&&(this.updateSetting("imageFile",e),this.$emit("image-selected",e)),t.target.value=""}},formatFileSize:function(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB"}}},I=A;var $=(0,f.A)(I,w,S,!1,null,null,null);const z=$.exports;var E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center space-y-4"},[e("div",{staticClass:"flex items-center justify-center gap-3"},[e("button",{staticClass:"px-8 py-3 rounded-full bg-red-500 text-white font-medium text-lg hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",attrs:{disabled:t.isProcessing||0===t.selectedCount},on:{click:function(e){return t.$emit("process")}}},[e("i",{staticClass:"fa fa-tint"}),t.isProcessing?e("span",[t._v("处理中...")]):e("span",[t._v("添加水印 ("+t._s(t.selectedCount)+")")])]),t.successCount>0?e("button",{staticClass:"px-6 py-3 rounded-full bg-green-500 text-white font-medium hover:bg-green-600 transition flex items-center gap-2",on:{click:function(e){return t.$emit("download-all")}}},[e("i",{staticClass:"fa fa-download"}),t._v(" 下载 ("+t._s(t.successCount)+") ")]):t._e()]),e("div",{staticClass:"flex items-center justify-center gap-2 text-sm"},[e("button",{staticClass:"px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",attrs:{disabled:t.isProcessing},on:{click:function(e){return t.$emit("select-all")}}},[t._v(" 全选 ")]),e("button",{staticClass:"px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition",attrs:{disabled:t.isProcessing},on:{click:function(e){return t.$emit("deselect-all")}}},[t._v(" 取消全选 ")]),e("button",{staticClass:"px-3 py-1 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50 transition",attrs:{disabled:t.isProcessing},on:{click:function(e){return t.$emit("clear-all")}}},[t._v(" 清空 ")])])])},D=[];a(2892);const O={name:"PdfActionButtons",props:{isProcessing:{type:Boolean,default:!1},selectedCount:{type:Number,default:0},successCount:{type:Number,default:0}}},T=O;var B=(0,f.A)(T,E,D,!1,null,null,null);const j=B.exports;var L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center space-y-3"},[t._m(0),e("div",{staticClass:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2"},[e("div",{staticClass:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(t.progressPercent,"%")}})]),e("div",{staticClass:"text-sm text-neutral-600 dark:text-neutral-400"},[t._v(" 进度: "+t._s(t.processedCount)+"/"+t._s(t.totalToProcess)+" ("+t._s(Math.round(t.progressPercent))+"%) ")])])},N=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center justify-center gap-2 text-blue-500"},[e("i",{staticClass:"fa fa-spinner fa-spin"}),e("span",[t._v("正在批量处理PDF文件...")])])}];const R={name:"PdfProgressDisplay",props:{processedCount:{type:Number,default:0},totalToProcess:{type:Number,default:0}},computed:{progressPercent:function(){return 0===this.totalToProcess?0:this.processedCount/this.totalToProcess*100}}},W=R;var U=(0,f.A)(W,L,N,!1,null,null,null);const M=U.exports;var G=function(){var t=this,e=t._self._c;return e("div",[t.batchErrors.length?e("div",{staticClass:"border border-red-200 dark:border-red-800 rounded-lg p-4 bg-red-50 dark:bg-red-900/10 mb-4"},[e("div",{staticClass:"flex items-center gap-2 mb-2"},[e("i",{staticClass:"fa fa-exclamation-triangle text-red-500"}),e("span",{staticClass:"font-medium text-red-700 dark:text-red-300"},[t._v("处理失败的文件 ("+t._s(t.batchErrors.length)+"个)")])]),e("div",{staticClass:"space-y-1 max-h-32 overflow-y-auto"},t._l(t.batchErrors,function(a){return e("div",{key:a.fileName,staticClass:"text-sm text-red-600 dark:text-red-400"},[e("span",{staticClass:"font-medium"},[t._v(t._s(a.fileName)+":")]),t._v(" "+t._s(a.message)+" ")])}),0)]):t._e(),t.successCount>0&&!t.isProcessing?e("div",{staticClass:"text-center text-green-600 dark:text-green-400"},[e("i",{staticClass:"fa fa-check-circle mr-2"}),t._v(" 成功处理 "+t._s(t.successCount)+" 个文件 ")]):t._e()])},K=[];const X={name:"PdfErrorDisplay",props:{batchErrors:{type:Array,default:function(){return[]}},successCount:{type:Number,default:0},isProcessing:{type:Boolean,default:!1}}},Y=X;var Z=(0,f.A)(Y,G,K,!1,null,null,null);const q=Z.exports;var J=a(48355);const H={name:"PdfWatermarkPanel",components:{PdfFileUpload:m,PdfFileList:y,PdfWatermarkSettings:z,PdfActionButtons:j,PdfProgressDisplay:M,PdfErrorDisplay:q},data:function(){return{files:[],isProcessing:!1,batchErrors:[],watermarkSettings:{type:"text",text:"WATERMARK",fontSize:24,color:"#ff0000",opacity:.5,rotation:0,horizontalPosition:"center",verticalPosition:"center",horizontalOffset:0,verticalOffset:0,density:"single",imageFile:null,imageWidth:100}}},computed:{selectedCount:function(){return this.files.filter(function(t){return t.selected}).length},successCount:function(){return this.files.filter(function(t){return"success"===t.status}).length},errorCount:function(){return this.files.filter(function(t){return"error"===t.status}).length},processedCount:function(){return this.files.filter(function(t){return"success"===t.status||"error"===t.status}).length},totalToProcess:function(){return this.files.filter(function(t){return t.selected}).length}},methods:{onFilesSelected:function(t){var e,a=t.map(function(t){return{file:t,name:t.name,size:t.size,selected:!0,status:null,result:null,error:null,_key:t.name+"_"+t.size+"_"+Date.now()+Math.random()}});(e=this.files).push.apply(e,(0,o.A)(a))},clearFiles:function(){this.files=[],this.batchErrors=[]},selectAllFiles:function(){this.files.forEach(function(t){return t.selected=!0})},deselectAllFiles:function(){this.files.forEach(function(t){return t.selected=!1})},onImageSelect:function(t){this.watermarkSettings.imageFile=t},processSingleFile:function(t){var e=this;return(0,i.A)((0,l.A)().m(function a(){var r,s,n,i;return(0,l.A)().w(function(a){while(1)switch(a.n){case 0:if(a.p=0,t.status="processing",t.file){a.n=1;break}throw new Error("文件对象丢失，请重新上传");case 1:if(r={_file:t.file,name:t.name},"application/pdf"===t.file.type){a.n=2;break}throw new Error("文件类型不是PDF格式");case 2:if(0!==t.file.size){a.n=3;break}throw new Error("文件为空");case 3:return a.n=4,J.u.processWatermark(r,e.watermarkSettings);case 4:s=a.v,n=new Blob([s],{type:"application/pdf"}),t.result=URL.createObjectURL(n),t.status="success",t.error=null,a.n=6;break;case 5:a.p=5,i=a.v,t.status="error",t.error=i.message||i,e.batchErrors.push({fileName:t.name,message:i.message||i}),console.error("处理文件 ".concat(t.name," 失败:"),i);case 6:return a.a(2)}},a,null,[[0,5]])}))()},processSelectedFiles:function(){var t=this;return(0,i.A)((0,l.A)().m(function e(){var a,r,s,n,i,o,u;return(0,l.A)().w(function(e){while(1)switch(e.n){case 0:if(0!==t.selectedCount){e.n=1;break}return null===(a=t.$message)||void 0===a||a.error("请先选择要处理的文件"),e.a(2);case 1:t.isProcessing=!0,t.batchErrors=[],t.files.forEach(function(t){t.selected&&(t.status=null,t.result=null,t.error=null)}),r=t.files.filter(function(t){return t.selected}),s=3,n=0;case 2:if(!(n<r.length)){e.n=5;break}return i=r.slice(n,n+s),e.n=3,Promise.all(i.map(function(e){return t.processSingleFile(e)}));case 3:return e.n=4,new Promise(function(t){return setTimeout(t,100)});case 4:n+=s,e.n=2;break;case 5:t.isProcessing=!1,t.successCount>0&&(null===(o=t.$message)||void 0===o||o.success("成功处理 ".concat(t.successCount," 个文件"))),t.errorCount>0&&(null===(u=t.$message)||void 0===u||u.error("".concat(t.errorCount," 个文件处理失败")));case 6:return e.a(2)}},e)}))()},downloadFile:function(t){if(t.result){var e=document.createElement("a");e.href=t.result,e.download="watermarked_".concat(t.name),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},downloadAllFiles:function(){var t=this.files.filter(function(t){return"success"===t.status});1===t.length?this.downloadFile(t[0]):this.downloadAsZip(t)},downloadAsZip:function(t){var e=this;return(0,i.A)((0,l.A)().m(function r(){var s,i,o,u,c,d,p,f,g,m,b,x;return(0,l.A)().w(function(r){while(1)switch(r.n){case 0:return r.p=0,r.n=1,Promise.resolve().then(a.t.bind(a,44813,23));case 1:s=r.v["default"],i=new s,o=(0,n.A)(t),r.p=2,o.s();case 3:if((u=o.n()).done){r.n=7;break}return c=u.value,r.n=4,fetch(c.result);case 4:return d=r.v,r.n=5,d.blob();case 5:p=r.v,i.file("watermarked_".concat(c.name),p);case 6:r.n=3;break;case 7:r.n=9;break;case 8:r.p=8,b=r.v,o.e(b);case 9:return r.p=9,o.f(),r.f(9);case 10:return r.n=11,i.generateAsync({type:"blob"});case 11:f=r.v,g=document.createElement("a"),g.href=URL.createObjectURL(f),g.download="watermarked_pdfs_".concat((new Date).toISOString().slice(0,10),".zip"),document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(g.href),r.n=13;break;case 12:r.p=12,x=r.v,console.error("打包下载失败:",x),null===(m=e.$message)||void 0===m||m.error("打包下载失败，请逐个下载");case 13:return r.a(2)}},r,null,[[2,8,9,10],[0,12]])}))()}}},Q=H;var V=(0,f.A)(Q,r,s,!1,null,"07654e1f",null);const tt=V.exports}}]);